--- !ditz.rubyforge.org,2008-03-06/issue 
title: Puffin crashes on `close file'
desc: |-
  Build date: UNKNOWN
  Crash date: 2009-09-23 19:27:56
  java.version    1.5.0_16
  java.vendor     Sun Microsystems Inc.
  os.name         Linux
  os.arch         i386
  os.version      2.6.24-19-generic
  user.name       pont
  java.lang.IndexOutOfBoundsException: Index: 2, Size: 2
  at java.util.ArrayList.RangeCheck(ArrayList.java:546)
  at java.util.ArrayList.get(ArrayList.java:321)
  at net.talvi.puffinplot.PuffinApp.getSuite(PuffinApp.java:299)
  at net.talvi.puffinplot.PuffinApp.getSample(PuffinApp.java:303)
  at net.talvi.puffinplot.window.MainGraphDisplay$1.getSample(MainGraphDisplay.java:30)
  at net.talvi.puffinplot.plots.SampleEqAreaPlot.draw(SampleEqAreaPlot.java:37)
  at net.talvi.puffinplot.window.GraphDisplay.paint(GraphDisplay.java:99)
  ...
  
  Looks as though it's just not resetting the current suite index, so
  it falls off the end of the list if you're looking at the last suite and
  close it.
type: :bugfix
component: PuffinPlot
release: "1.0"
reporter: Pontus Lurcock <pont@talvi.net>
status: :closed
disposition: :fixed
creation_time: 2009-09-23 07:32:10.767731 Z
references: []

id: caa931e6126b3b10307a1f86c8ab1a8044c4d75e
log_events: 
- - 2009-09-23 07:32:11.107914 Z
  - Pontus Lurcock <pont@talvi.net>
  - created
  - ""
- - 2009-09-23 22:11:04.554062 Z
  - Pontus Lurcock <pont@talvi.net>
  - closed with disposition fixed
  - |-
    On closing a suite, Puffin now sets the current suit to the previous
    one (if any), otherwise the next one (if any), otherwise none. Replaced
    PuffinApp's currentSuiteIndex with a pointer to the suite itself which
    should make this kind of bug less likely.
