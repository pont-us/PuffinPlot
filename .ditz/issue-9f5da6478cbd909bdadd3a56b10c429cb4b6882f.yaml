--- !ditz.rubyforge.org,2008-03-06/issue 
title: Demag midpoint
desc: |-
  Programmatically pick out the demagnetization level corresponding
  to a one-half reduction in intensity, show it (optionally) on the
  graph(s), and write it to a file for a whole suite.
type: :feature
component: PuffinPlot
release: "1.0"
reporter: Pontus Lurcock <pont@ou094023>
status: :in_progress
disposition: 
creation_time: 2008-11-05 07:55:53.167190 Z
references: []

id: 9f5da6478cbd909bdadd3a56b10c429cb4b6882f
log_events: 
- - 2008-11-05 07:55:54.018100 Z
  - Pontus Lurcock <pont@ou094023>
  - created
  - ""
- - 2009-04-05 20:46:55.363032 Z
  - Pontus Lurcock <pont@talvi.net>
  - assigned to release 1.1 from unassigned
  - ""
- - 2009-05-30 06:41:32.824706 Z
  - Pontus Lurcock <pont@talvi.net>
  - commented
  - |-
    Just closed #64 as dupe of this. Adding #64's description and 
    comment here since it contains some information not included in this
    ticket:
    
    Christian writes: "A cunning trick to teach the puffin plot would
    be a 'find mid point' on intensity plots.  This would be great
    for NRM and ARM plots. There are scripts out there that will do
    this for you. I have not yet put in the effort to learn how they
    work but have grand plans."
    
    I wrote: "Probably straightforward, but need to discuss with
    Christian to get an exact definition for `midpoint', a rationale
    for doing it, and references for the algorithm.- edited
    description (pont, four hours ago)- created (pont, five hours
    ago)"
- - 2009-05-30 06:46:39.405966 Z
  - Pontus Lurcock <pont@talvi.net>
  - assigned to release 1.0 from 1.1
  - |-
    Christian's keen on this and it's probably easy, so will try to
    get it in for the 1.0 release.
- - 2009-06-04 02:39:14.045366 Z
  - Pontus Lurcock <pont@talvi.net>
  - commented
  - "Further details following discussion with Christian:\n\n\
    What we are looking to calculate is known as the `median destructive\n\
    field' (or, presumably, temperature, though this seems less common),\n\
    which is the field required to reduce the intensity to one half of its\n\
    initial value. It's described in Dunlop and \xC3\x96zdemir (p. 230). So all\n\
    we need to do is determine where the intensity curve crosses the\n\
    horizontal line corresponding to half the initial intensity, and read\n\
    off the corresponding field strength (or temperature). Interpolating\n\
    between two demagnetization levels will probably be necessary.\n\n\
    It's a little more complicated than that, though. Firstly, think about\n\
    NRMs with multiple components in different directions. The absolute\n\
    intensity might go up before it goes down, as the softest component\n\
    disappears first. What do we do then? There is no obvious right\n\
    answer. The way to implement it is probably to use the initial\n\
    intensity by default, but allow the user to manually recalculate using\n\
    only selected points.\n\n\
    Secondly, what if there's more than one crossing? Probably easy: pick\n\
    the first (likely to be the one we care about), and again have manual\n\
    restricted recalculation as a fall-back.\n\n\
    Thirdly, what if there's no crossing (i.e. we never get down to half\n\
    intensity)? Just go with the maximum field/temperature, says\n\
    Christian: it will stand out anyway when graphed. But perhaps it\n\
    should be marked in some other way when saving the values.\n\n\
    MDF should be marked on the graph by orthogonal lines projecting from\n\
    the axes (as is Tauxe lecture 9) and saveable as CSV (can presumably\n\
    be thrown in with PCA and Fisher values)."
- - 2009-07-27 00:23:18.438447 Z
  - Pontus Lurcock <pont@talvi.net>
  - commented
  - |-
    Now mostly done. After discussion with Christian, have decided on
    initial implementation whereby the algorithm will be applied to 
    all visible points. Works well in the simple case; less so if one
    had multiple components with different directions. But we can
    deal with that if and when it becomes necessary.
- - 2009-07-27 00:23:23.608085 Z
  - Pontus Lurcock <pont@talvi.net>
  - changed status from unstarted to in_progress
  - ""
- - 2009-07-27 00:26:37.445743 Z
  - Pontus Lurcock <pont@talvi.net>
  - commented
  - |-
    The other remaining task: label MDF value on X-axis of demagnetization
    plot.
